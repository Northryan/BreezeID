# README

## Introduction

**BreezeID** is designed to detect diurnal breeze events (e.g., land/sea or mountain/valley breezes) using wind speed and direction data. The data is first transformed into a shore-parallel coordinate system, then filtered and analyzed to identify breeze events based on specific criteria.
<br>
<br>
Two versions of the method are included in this repository as Jupyter Notebooks (written in R):
*	**BreezeID_csv**: Designed to handle CSV files
*	**BreezeID_netcdf**: Designed to handle NetCDF files (such as ERA5 output)

The code is currently configured for a case study focused on land and sea breeze detection in Bengkulu, Indonesia. Accordingly, the output includes two tables: one summarizing land breeze events and the other summarizing sea breeze events. While the provided parameter values reflect this specific case, the script is designed to be adaptable; users can apply the methodology to other locations by modifying the user-defined parameters. Efforts have been made to generalize the methodology as much as possible, such that minimal modification of the code beyond the user-specified parameters is required.

### Bengkulu Example Files

An example/ folder is included in the repository, containing:
  * The ERA5 NetCDF file used in the Bengkulu case study. This file contains two variables: u10 [longitude, latitude, time] and v10 [longitude, latitude, time], where:
    - **longitude** spans from 100.25° to 104.25° in 0.25° increments
    - **latitude** spans from -2.0° to -6.0° in 0.25° increments
    - **time** spans from 0 UTC on 01 Jan 2018 to 0 UTC on 01 Jan 2019, at hourly intervals
  * Two versions of the MJO RMM index file:
    - **modified_rmm.74toRealtime_prelim2018.txt**: The version used in the published analysis described below. This file has RMM values for 01 June 1974 to 24 July 2023. At the time of analysis, the 2018 values were preliminary.
    - **modified_rmm.74toRealtime.txt**: An updated version of the same file, including values through 11 May 2025. Users may wish to use this version for updated or extended analyses. 
  * Output tables generated by the script for both versions of the MJO RMM index file.

### Authorship and Contact

This code was developed by Ryan North (1) for the analysis presented in the paper *"The Land-Sea Breeze Circulation Over the West Coast of Sumatra"* co-authored with Courtney Schumacher (1), Craig Epifanio (1), Gumilang Deranadyan (2), Agie Wandala Putra (2), and Alif Adiyasa (2). 
<br>
  - (1) Department of Atmospheric Sciences, Texas A&M University, College Station, Texas
  - (2) Meteorological, Climatological and Geophysical Agency, Jakarta, Indonesia

<br>

*Corresponding author*: Ryan North (rnorth2@tamu.edu)

For questions related to this code or its use in the associated publication, please feel free to reach out.

## User-Specified Parameters

This section outlines the parameters that users must define to tailor the script to their specific dataset and study region. These inputs control aspects such as time zone conversion, data range, file paths, filtering settings, and output configuration.

1.	Time Definitions
  *	**local_zero_utc**: Specify what 0 UTC is in local 24-hour time. This parameter adjusts the time zone of the data to local time.
    -	Example: local_zero_utc = 7 (7 AM local time)
  *	**sampling_rate**: Specify the sampling rate in terms of hours. This defines the frequency at which data points are recorded.
    -	Example: sampling_rate = 1 (hourly data)
      
<br>

2.	Detection Windows
  *	**land_breeze_window_start_time**: Specify when to start a new land breeze day in local 24-hour time. This sets the start time for detecting land breeze events. 
    -	Example: land_breeze_window_start_time = 10 (10 AM local time)
  *	**sea_breeze_window_start_time**: Specify when to start a new sea breeze day in local 24-hour time. This sets the start time for detecting sea breeze events.
    -	Example: sea_breeze_window_start_time = 7 (7 AM local time)
      
<br>

3.	Data Range
  *	**data_start_date**: The start date of your data in YYYY-MM-DD format. This defines the beginning of the analysis period. 
    -	Example: data_start_date = "2018-01-01"
  *	**data_end_date**: The end date of your data in YYYY-MM-DD format. This defines the end of the analysis period.
    -	Example: data_end_date = "2018-12-31"
      
<br>

 4.	MJO RMM File
  *	**MJO_RMM_file_location**: Path to the folder with MJO information. This file contains data related to the Madden-Julian Oscillation (MJO) which is used in the analysis. 
    -	Example: MJO_RMM_file_location = "path/to/ modified_rmm.74toRealtime.txt"
  *	**Note**: Two versions of “modified_rmm.74toRealtime.txt” are included in the example/ folder, with values through 11 May 2025.
    
<br>

5.	Data Files
  *	**data_file_path**: Path to the folder with data files. This directory should contain the CSV files with wind speed and direction data.
    -	Example: data_file_path = "path/to/data_directory"
  *	**Note**: See **Accepted File Naming Conventions (CSV)** below for supported CSV naming conventions.
  *	The table below summarizes the remaining data files input variables for both versions of BreezeID. 'NA' indicates that the variable is not required for that particular version of the code. 
    
| Variable Name | CSV Example | NetCDF Example |
| :-----: | :-----: | :-----: |
| **file_type** | "csv" | "nc" |
| **speed_var** | "speed" | NA |
| **direction_var** | "direction | NA |
| **u_comp_name** | NA | "u10" |
| **v_comp_name** | NA | "v10" |
| lat_interest | NA | -4.0 |
| lon_interest | NA | 102.25 |


<br>

6.	Coastline Shape
   
  The coastline orientation can be specified manually using a predefined rotation angle or calculated automatically based on three geographic coordinates. The rotation angle represents the counterclockwise deviation of the coastline from the positive x-axis.
  *	**coordinate_axis_rotation_user**: User-specified rotation angle.
    -	Example: coordinate_axis_rotation_user = 40.00
  *	**Latitude and Longitude for three points**: If calculating the rotation angle, provide the latitude and longitude for three points along the coastline AND set **coordinate_axis_rotation_user** = FALSE. 

<br>

7.	Filtering Parameters
  *	**synoptic_filter_period**: Defined in days. This parameter sets the period for the synoptic filter applied to the wind data.
    -	Example: synoptic_filter_period = 3
  *	**noise_filter_period**: Defined in hours. This parameter sets the period for the noise filter applied to the wind data.
    -	Example: noise_filter_period = 7

<br>

8.	Data Table Output Parameters
  *	**data_table_output_directory**: File path to the desired output data directory. This is where the output tables will be saved.
    -	Example: data_table_output_directory = "path/to/data_output_directory"
  *	**output_file_name_land**: File name for the land breeze output table. Currently supports CSV format.
    -	Example: output_file_name_land = "land_breeze_output_table.csv"
  *	**output_file_name_sea**: File name for the sea breeze output table. Currently supports CSV format.
    -	Example: output_file_name_sea = "sea_breeze_output_table.csv"
  *	**Note**: See **Output Table Description** below for more information about the output variables. 

 
## Accepted File Naming Conventions (CSV)

This script is designed to accommodate a variety of file naming conventions for CSV files. It automatically orders the files based on numeric prefixes, month names, and years to ensure that the data is read and combined in the correct chronological sequence. The script parses and organizes these files automatically. The following formats have been tested and are supported:
1.	**Numeric Prefix with Month Name**
*	Examples: 1_January.csv, 7_July.csv, 10_October.csv
2.	**Month Name with Year**
*	Examples: January_2019.csv, July_2019.csv, October_2019.csv
3.	**Numeric Month with Year**
*	Examples: 12_2018.csv, 01_2019.csv, 03_2019.csv
4.	**Year with Month Name**
*	Examples: 2019_January.csv, 2019_July.csv, 2019_October.csv
5.	**Month Name Only**
*	Examples: January.csv, July.csv, October.csv

 
## Output Table Description

| Variable Name | Description |
| -----| -----|
| Year |	The calendar year in which the event occurred. |
| Month |	The month (1–12) of the event. |
| Day |	The calendar day of the month on which the event occurred. |
| Onset_time |	The local time (in decimal hours) when the breeze event began. |
| Duration |	The duration of the event in decimal hours. |
| Time_Max_Speed |	The local time (in decimal hours) when the maximum wind speed occurred. |
| Max_Speed |	The maximum wind speed (in the original units of the input data). |
| MJO_Phase |	The phase of the Madden-Julian Oscillation (MJO) at the time of the event. |
| MJO_Mag |	The magnitude (amplitude) of the MJO at the time of the event. |
| Event_Type |	A label indicating the type of event (e.g., "classic" or "interruption"). |
| Flip2_Onset_Time |	Onset time (in decimal hours) of the secondary breeze event, if detected. |
| Flip2_Duration |	Duration (in decimal hours) of the secondary event in hours. |
| Flip2_Time_Max_speed |	Time of maximum wind speed (in decimal hours) during the secondary event. |
| Flip2_Max_Speed |	Maximum wind speed during the secondary event. |
